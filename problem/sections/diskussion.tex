\section{Diskussion}


Formålet med dette afsnit er: I hvor høj grad løser vores produkt problemet "Mangel på visualisering af belysningen fra lamper ved E-handel". For at afgøre dette sammenlignes de krav der er fastsat igennem rapporten med de resultater der er opnået. 

\subsection{Løsningen i forhold til løsningsforslaget}

Ud fra den løsning der er blevet dokumenteret i afsnit \ref{sec:problemlosning}, diskuteres der nu i hvor høj grad den opfylder kravene i afsnit \ref{sec:losning}. 

Det første krav var, at programmet skulle kunne vise et billede af en lampe og dens belysning. Dette krav er som vist under afsnit \ref{sec:test} opfyldt, da programmet kan modtage en 3D-fil for en lampe og en kontekst, og ud fra dette rendere og gemme et billede af lampens belysning i konteksten. Det er dog vigtigt at pointere, at billedet af lampen er renderet på baggrund af en simpel model (phong-modellen) som i vores program ikke tager højde for alle lysfænomener såsom refleksion og refraktion. Dette gør, at programmet har en begrænsning i forhold til den realisme billederne af lampen kan have. Et eksempel som programmet ikke kan rendere er en lampe som har en reflekterende overflade som gør, at man kan se spejlning af andre objekter i lampens overflade.  

Det andet krav var, at det i programmet skulle være muligt at ændre synsvinklen hvorfra lampen og dens belysning visualiseres fra. Dette krav er løst som beskrevet under afsnit \ref{sec:test} ved at modtage to vinkler, der indikerer hvorfra lampen skal ses. Dog er der en begrænsning i, at man ikke kan ændre afstanden mellem kameraet og lampen uden at ændre i 3D-filen. 

Det tredje krav var, at det i programmet skulle være muligt at ændre farvetemperaturen for pæren i lampen. Dette er gjort ved at omdanne kelvin til RGB-værdier ud fra algortimen som er beskrevet i afsnit \ref{sec:temptilrgb}. Når 3D-filen indlæses overskrives alle sorte lyskilder med den pågældende farvetemperatur. Ulempen ved denne løsning er, at algortimen der konveterer farvetemperatur i kelvin til RBG-værdier kun bygger på regression af ét datasæt, og der kan derfor være usikkerheder som gør, at billedet af lampen og dens belysning med en bestemt farvetemperatur ikke stemmer overens med den reelle farvetemperatur for lampen. 

Det fjerde krav var, at programmet skulle kunne rendere et billede af en lampe og dens belysning på en tid der er praktisk anvendelig. Som dokumenteret i afsnit \ref{sec:test} ses der, at et enkelt billede af en lampe og dens belysning kan tage XXX timer at rendere. Dette udelukker, at vores løsning er praktisk anvendelig i form af, at der skal renderes et nyt billede så snart brugeren ændrer synsvinklen. Dog kunne man benytte programmet til, at forudrendere billeder af lampen fra forskellige synsvinkler som lagres på en server, der herefter kan vises på en e-butiks hjemmeside. Dette begrænser dog antallet af synsvinkler som lampen kan visualiseres fra, da mange synsvinkler og farvetemperaturer giver mange kombinationer og dermed lang renderingstid.

Det femte krav var, at programmet skulle kunne implementeres på en e-butiks hjemmeside således at billederne af lampen og dens belysning kan visualiseres for kunderne. Dette krav blev ikke opfyldt da fokus har været at visualisere belysningen fra lamper, og ikke selve brugerfladen for visningen af de renderede billeder på e-butikkens hjemmeside.  

\subsection*{Opsummering}

Ud fra ovenstående kan der nu kort opsummeres, at krav 1-3 er løst, da programmet kan rendere et billede af en lampe og dens belysning, fra forskellige synsvinkler og med forskellige farvetemperaturer. Krav 4 er delvist løst, da det stadigvæk er muligt for simple renderinger at fremstille billeder på en tid, som gør at programmet er praktisk anvendelig til renderinger af billeder til en e-butiks hjemmeside. Krav 5 er ikke løst, da fokuset har været at lave den del der renderer billedet, og der mangler derfor den brugerflade, som gør at billederne kan vises på en e-butiks hjemmeside. 

\subsection{løsningen i forhold til problemformuleringen}
 Vi har nu diskuteret hvorvidt løsningen lever op til kravene til løsningsforslaget i afsnit \ref{sec:losning}. I dette afsnit diskuteres der nu i hvor høj grad løsningen lever op til besvarelsen af den endelige problemformuleringen.

Det overordnede spørgsmål i den endelige problemformulering var følgende: "Hvordan kan vi lave et værktøj til e-butikker, som visualiserer belysningen fra indendørslamper for kunderne?". Inden  der afgøres hvorvidt dette spørgsmål er besvaret, diskuteres først de hvorvidt de tre underspørgsmål i den endelige problemformulering er besvaret.

Det første underspørgsmål var: "Hvordan visualiseres lyset fra en given indendørslampe?". Dette underspørgsmål blev besvaret ved at repræsentere lampen, som en 3D-model, som indlæses af programmet og renderes vha. raytracing med brug af phong-modellen beskrevet i \ref{sec:teori}. I stedet for phong-modellen, kunne det tænkes er der var andre modeller, som også kunne anvendes. Derudover kunne modellen udvides, så den kunne håndtere refleksioner og refraktioner, og på den måde hæve kvaliteten af det renderede billede. Dette er dog ikke nået i dette projekt grundet tidsmangel. Derudover er vil dette sandsynligvis også øge renderingstiden, hvilket vil kræve at programmet optimeres yderligere end det på nuværende tidspunkt er gjort vha. kd-træer. Der er derfor en balancegang mellem realisme og renderingstid, som skal tages højde for, hvis programmet skulle videreudvikles.

Det andet underspørgsmål var: "Hvordan kan lampen og dens belysning visualiseres flere vinkler?". Dette underspørgsmålet blev besvaret ved at anvende teorien om rotationsmatricer, til at positionere det virtuelle kamera, som billedet renderes ud fra. I stedet for at rendere billedet af lampen vha.\ raytracing og rotere det virtuelle kamera, ville det være en mulighed at benytte sig af augmented reality, som til dels ville gøre det muligt at indsætte lampen i en kontekst, men samtidig også gøre det nemt for kunden at betragte lampen fra forskellige vinkler.

Det tredje underspørgsmål var: "Hvordan visualiseres forskellige pærers lys?". I programmet er en pærer beskrevet ved en radius, lysintensitet og farvetemperatur. Dette er blot en tilnærmet model af en pærer. Der tages højde for pærens form eller type. Derudover visualiseres selve pæren ikke i programmet, men kun selve dens lys. For at øge realismen, ville det være oplagt at implementere dette i programmet. 
For at udregne farvetemperaturen blev der anvendt en algoritme, der konverterer farvetemperaturer i kelvin om til RGB-værdier, som kunne bruges i phong-modellen. Resultatet af dette er vist i afsnit \ref{sec:test}, hvor det er vist hvordan farvetemperaturen kan ændres, når programmet eksekveres. 

\subsection*{Opsummering}
Ud fra ovenstående kan det ses at de tre underspørgsmål er besvaret, men som nævnt er der ting som kan forbedres eller laves anderledes. Besvarelse af disse tre underspørgsmålet, danner samlet set besvarelsen til problemformuleringen. Dog er der i rapporten ikke udviklet et færdigt værktøj som er klar til at blive implementeret på en e-butiks hjemmeside, men istedet er der udviklet en delløsning der anvender de modeller og teorier som er nødvendige for at kunne rendere et billede af en lampe og dens belysning. Derudover mangler der en test af om løsningen hjælper kunderne med at visualisere en lampe og dens belysning når de handler på en e-butiks hjemmeside. 


 \subsection{Diskussion af det initierende problem}

I dette afsnit vil vi se tilbage på det initierende problem og diskutere de valg og antagelser som er truffet i forbindelse med udarbejdelsen af problemformuleringen. Formålet med dette afsnit er, at diskutere hvordan vores valg og antagelser har påvirket besvarelsen af problemformuleringen. 

I forbindelse med problemanalysen blev der foretaget en antagelse som var: "Mennesker har svært ved at visualisere hvordan lys udbreder sig fra en lampe". Denne antagelse blev aldrig fuldt ud bevist, men istedet argumenteret for ud fra egne erfaringer, diskussion med lektor og citat fra belysningskonsulent. For at underbygge antagelsen yderligere ville det være nødvendigt at gennemføre en spørgeskemaundersøgelse, som viser hvor stor en procentdel af kunderne som har svært ved at visualisere hvordan lys udbreder sig fra en lampe. 

\clearpage