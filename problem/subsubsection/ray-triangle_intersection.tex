\subsubsection{Ray-triangle intersection}
\label{sec:triangle_intersection}
For at finde om der er et intersectionpoint mellem en stråle og en trekant, kan man følge tre trin:
\begin{enumerate}
  \item Påvis at strålens linje ikke er parralel med trekantens plan
  \item Find punktet i planet og påvis at punktet er foran strålens udgangspunkt
  \item Påvis at punktet i trekantens plan, ligger indenfor trekanten
\end{enumerate}


[FIND IF RAY PARRALEL WITH TRIANGLE PLANE]()

En stråle er paralel med et plan hvis strålens retning er 90 grader relativt til planets normalvektor, dette er sandt hvis ligning \ref{eq:parralel} er opfyldt.

\begin{equation}
\label{eq:parralel}
\vv{r} \bullet \vv{n}=0
\end{equation}

Planets normalvektor findes ved at krydse to vektore fra en af trekantens hjørner til de to andre.

\begin{figure}[H]
  \label{fig:normalvektor}
  \centering
  \begin{tikzpicture}
    \path[fill=gray!10] (0,0) -- (4,0) -- (4,4) -- (0,4) -- (0,0);
    \path[fill=gray!30, draw=gray!60] (1,2) -- (2,3) -- (3,1) -- (1,2);
    \draw [blue!50, thick, -{Stealth[width=3mm, length=3mm]}] (2,3) -- (3,1);
    \draw [blue!50, thick, -{Stealth[width=3mm, length=3mm]}] (2,3) -- (1,2);
    \node [above] at (2,3) {$A$};
    \draw plot [mark=*, mark size=1] coordinates{(2,3) }; 
    \node [above right] at (3,1) {$B$};
    \draw plot [mark=*, mark size=1] coordinates{(3,1) }; 
    \node [above left] at (1,2) {$C$};
    \draw plot [mark=*, mark size=1] coordinates{(1,2) }; 
  \end{tikzpicture}

  \caption{Normalvektor test}
\end{figure}


[FIND IF PLANE IS IN FRONT OF RAY ORIGIN]()

[NEDENSTÅENDE SKAL OMSKRIVES EN SMULE]()

punktmændgen som opgør planet kan beskrives som de punkter $\vv{p}$ der opfylder reglen $ \vv{p} \bullet \vv{n} = 0$ 
$$ P(t) = \vv{r} \cdotp t + \vv{p_0}$$
$$ ( P(t_A) - A ) \bullet \vv{n} = 0 $$
$$ (\vv{r} \cdotp t_A + \vv{p_0} - A) \bullet \vv{n} = 0 $$
$$ t_A \cdotp \vv{r} \bullet \vv{n} + (\vv{p_0} - A) \bullet \vv{n} = 0 $$
\begin{equation}
 t_A = \frac{(\vv{A} - \vv{p_0})\bullet \vv{n}}{\vv{r} \bullet \vv{n}}
\end{equation}


[FIND IF POINT IS INSIDE TRIANGLE]()